<div class="d-flex flex-column">

  <div class="report-header d-flex align-center justify-between gap-3">

    <div class="d-flex align-center gap-3">

      <div routerLink="/dashboard" class="logo d-flex align-center">
        <a href="/dashboard">
          <img src="../../../favicon.png" alt="logo" width="40px">
        </a>
      </div>

    </div>

    <div class="d-flex align-center justify-between gap-3 width-100">

      <button (click)="goBack()">
        <img src="../../../assets/icons/back_arrow.svg" alt="back" width="13px" style="margin-right: 6px;">
        Back
      </button>

      <div class="d-flex align-center justify-between gap-3">
        <button (click)="isPreviewMode = !isPreviewMode" >
          Preview
        </button>
  
        <select [(ngModel)]="selectedDatePreset"(change)="onDatePresetChange($event)">
          <option *ngFor="let preset of reportsDataService.DATE_PRESETS" [value]="preset.value">
            {{ preset.text }}
          </option>
        </select>
  
        <button (click)="editScheduleConfiguration()">
          <img src="../../../assets/icons/calendar.svg" alt="schedule" width="18px" style="margin-right: 5px;">
          Scheduling configuration
        </button>
  
        <button class="blue" (click)="saveConfiguration()">Save</button>
      </div>
      
    </div>

  </div>

  

  <div 
  style="display: grid; grid-template-columns: 0% 80% 20%; gap: 0%; background-color: #f9fafb;" 
  [style]="{'grid-template-columns': isPreviewMode ? '10% 80% 10%' : '0% 80% 20%'}">

    

    <div></div>

    <div #reportContainer class="report-container d-flex flex-column pt-3 pl-5 pr-5">

      <div class="d-flex justify-center">
        <p class="dummy-data-warning">Right now you are seeing a dummy data. The real data will be loaded when the report is generated.</p>
      </div>
          
      <report
        [(reportSections)]="reportSections"
        [selectedDatePresetText]="selectedDatePresetText"
        [reportTitle]="reportTitle"
        [headerBackgroundColor]="headerBackgroundColor()"
        [reportBackgroundColor]="reportBackgroundColor()"
        [(clientImageUrl)]="clientImageUrl"
        [(agencyImageUrl)]="agencyImageUrl"
        [(clientImageGsUri)]="clientImageGsUri"
        [(agencyImageGsUri)]="agencyImageGsUri"
      ></report>

    </div>

    @if(!isPreviewMode) {
      <edit-metrics
      [(reportSections)]="reportSections"
      [(reportTitle)]="reportTitle"
      [(headerBackgroundColor)]="headerBackgroundColor"
      [(reportBackgroundColor)]="reportBackgroundColor"
      (sectionFocus)="onSectionFocus($event)"
      ></edit-metrics>
    }

  </div>
  
</div>
  